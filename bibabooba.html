<!DOCTYPE html>
<html>
<head>
<title>M-EBEL</title>
<meta charset="utf-8">
<style>
  html, body {
    height: 100%;
  }
.content {
height: auto !important; 
min-height: 90%;
display: table;
}
.footer {
  position: absolute;
  left: 0;
  bottom: -1;
  display: inline-block;
  width: 100%;
  min-width: 900px;
  height: 100px;
  background-color: grey;
  color:black;
  overflow: hidden;
}
.footerinfo {
  color:black;
  font-family:'Trebuchet MS', sans-serif; 
  margin-left: 30px;
  margin-top: 10px;
  font-size: 16px;
}
.searchBar {
  background-image: url('search.png');
  background-repeat: no-repeat;
  background-position: 8px 10px;
  background-size: 24px;
  font-size: 16px;
  width: 50vw;
  padding: 12px 30px 12px 40px;
  border:  1px solid rgb(124, 124, 124);
  margin-bottom: 30px;
  margin-top: 90px;
  margin-left: 40px;
}

table.main {
  text-align: left;
  table-layout:auto;
  width: 90%;
  max-width: 90%;
  min-width: 800px;
  margin-left: 2%;
  margin-bottom: 5%;
}
  table{
  background-color: rgb(250, 250, 250);
  border-collapse: separate;
  border-spacing: 5px 2px;
  border: 1px solid rgb(250, 250, 250);
  font-family: Arial, Helvetica, sans;
  text-align: left;
  color: rgb(49, 49, 49);
}
  tr {
  height: 50px;
  }
  th {
    padding: 2px;
    border-bottom: 1px solid rgb(132, 177, 243); 
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    padding-left: 7px;
    user-select: none;
  }
  td {
    border-bottom: 1px solid rgb(199, 199, 199);
    padding-left: 7px;
  }
  .thmain:hover {
    background-color: rgb(214, 214, 214) ;
    cursor: pointer;
  }
.editbutton {
  background: none;
  border: none;
  background-image: url('edit.png');
  background-repeat: no-repeat;
  background-size: 24px;
  padding: 12px 12px;
  margin-left: 4px;
  margin-right: 20px;
  margin-bottom: 4px;
  cursor: pointer;
}
.editbutton:hover 
{
  background: rgb(214, 214, 214);
  background-image: url('edit.png');
  background-repeat: no-repeat;
  background-size: 24px;
  border-radius: 5px;
}
.deletebutton {
  background: none;
  border: none;
  background-image: url('delete.png');
  background-repeat: no-repeat;
  background-size: 24px;
  margin-bottom: 4px;
  padding: 12px 12px;
  cursor: pointer;
}
.deletebutton:hover 
{
  background: rgb(214, 214, 214);
  background-image: url('delete.png');
  background-repeat: no-repeat;
  background-size: 24px;
  border-radius: 5px;
}
.checkmarkbutton {
  background: none;
  border: none;
  background-image: url('done.svg');
  background-repeat: no-repeat;
  background-size: 24px;
  padding: 12px 12px;
  margin-left: 4px;
  margin-right: 20px;
  margin-bottom: 4px;
  cursor: pointer;
}
.checkmarkbutton:hover
{
  background: rgb(214, 214, 214);
  background-image: url('done.svg');
  background-repeat: no-repeat;
  background-size: 24px;
  border-radius: 5px;
}
.sorterIcon {
  background: none;
  border: none;
  background-image: url('arrow.svg');
  background-repeat: no-repeat;
  background-size: 18px;
  padding: 12px 12px;
  margin-left: 4px;
  margin-right: 20px;
  margin-bottom: 4px;
}
#addButton{
  border: none;
  border-radius: 10px;
  background: none;
  /* font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; */
  font-family: system-ui;
  font-size: 18px;
  font-weight: 600;
  padding: 8px 8px 12px;
  margin-left: 20px;
  color: rgb(49, 49, 49);
}
#addButton:hover {
  background-color: rgb(214, 214, 214) ;
  cursor: pointer;
}

.paneltop {
  background-color: rgb(150, 186, 240);
  width: 100%; 
  min-width: 900px;
  position: absolute;
  margin-right: 0%;
  left: 0;
  right: 50;
  top: 0;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  height: 50px;
  white-space: nowrap;
}
.topelement-right {
  display: flex;
  margin-right: 30px;
  justify-content: center;
}
.topelementmbl{
   color:black;
   font-family:'Trebuchet MS', sans-serif; 
   font-style: normal;
   margin-bottom: 10px;
   margin-left: 30px;
   margin-top: 5px;
   font-size: 36px;
}
.topelementbutton {
  background: none;
  border: none;
  color: black;
  padding: 10px;
  text-align: center;
  font-size: 26px;
  cursor: pointer;
  margin-left: 20px;
}
.topelementbutton:hover {
  background-color: rgb(131, 162, 209);
}
</style>
<script>
  var adminSwitch = false;
  var editAlreadyUsed = false;
  function adminAccess()
  {
    var table, tr, i, j, cell;
    adminSwitch = !adminSwitch;
    table = document.getElementById("priceList");
    tr = table.getElementsByTagName("tr");
    var footer = document.getElementsByClassName("footerinfo");
    if (adminSwitch)
    {
      document.getElementById("addButton").style.display = "";
      for (i = 0; i < tr.length; i++) {
        tr[i].cells[0].style.display = "";
      }
      for (i = 0; i < 2; i++)
        for (j = 0; j < 2; j++)
        {
          footer[i].children[j].contentEditable = true;
          footer[i].children[j].style.border = "2px dashed rgb(53, 53, 53)";
        }
    }
    else 
    {
      document.getElementById("addButton").style.display = "none";
      for (i = 0; i < tr.length; i++) {
        if (tr[i].children[0].children[0]) {
        if (tr[i].children[0].children[0].className == "checkmarkbutton") 
          saveRowF(tr[i].children[0].children[0]);
      }
      tr[i].cells[0].style.display = "none";
      for (var k = 0; k < 2; k++)
        for (var f = 0; f < 2; f++)
        {
          footer[k].children[f].contentEditable = false;
          footer[k].children[f].style.border = "none";
        }
      }
    }
  }
  function barFilter() 
  {
    var input, filter, table, tr, td, i, txt;
    input = document.getElementById("filterInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("priceList");
    tr = table.getElementsByTagName("tr");
    for (i = 0; i < tr.length; i++)
    {
      td = tr[i].getElementsByTagName("td")[2];
      if (td)
       {
         txt = td.textContent;
         if (txt.toUpperCase().indexOf(filter) > -1)
         {
           tr[i].style.display = "";
         }
         else 
         {
           tr[i].style.display = "none";
         }
       }
    }
  }
  function sortColumn(element)
  {
    const getCellValue = (tr, idx) => tr.children[idx].innerText || tr.children[idx].textContent;
    const comparer = (idx, asc) => (a, b) => ((v1, v2) => 
      v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2) ? v1 - v2 : v1.toString().localeCompare(v2))
      (getCellValue(asc ? a : b, idx), getCellValue(asc ? b : a, idx));
    var table = document.getElementById("priceList");
    var tr = Array.from(table.getElementsByTagName("tr"));
    tr.shift();
    tr.sort(comparer(element.cellIndex, this.asc = !this.asc)).forEach(tr => table.appendChild(tr)); 
  }
  function addRow()
  { 
    if (!adminSwitch) return;
    var input, filter, tr, td, i, txt;
    var table = document.getElementById("priceList");
    var newRow = table.insertRow(1);
    for (var i = 0; i < 8;i++)
    {
      var cell = newRow.insertCell(i);
      if (i == 0) {
        cell.innerHTML = '<button class="editbutton" onclick="editRowF(this)">';
        cell.innerHTML += '\n <button class="deletebutton" onclick="deleteRowF(this)">';

      }
    }
  }
  function editRowF(element)
  {
    if (editAlreadyUsed) return;
    editAlreadyUsed = true;
    var row = element.parentNode.parentNode;
    var td = row.getElementsByTagName("td");
    var adminCell = td[0];
    adminCell.children[0].className = "checkmarkbutton";
    adminCell.children[0].setAttribute('onclick', 'saveRowF(this)')
    for (var i = 1; i < 7; i++)
    {
      td[i].style.border = "2px dashed rgb(199, 199, 199)";
      td[i].contentEditable = true;
    }
  }
  function deleteRowF(element)
  {
    var rowNumber = element.parentNode.parentNode.rowIndex;
    var row = element.parentNode.parentNode;
    var table = document.getElementById("priceList");
    table.deleteRow(rowNumber);
  }
  function saveRowF(element)
  {
    var row = element.parentNode.parentNode;
    var td = row.getElementsByTagName("td");
    var adminCell = td[0];
    adminCell.children[0].className = "editbutton";
    adminCell.children[0].setAttribute('onclick', 'editRowF(this)')
    for (var i = 1; i < 7; i++)
    {
      td[i].style.border = ""
      td[i].contentEditable = false;
    }
    editAlreadyUsed = false;
  }
</script>
</head>
<body style="background-color: rgb(250, 250, 250); display: table;">
<div class="content">
<div class="paneltop">
  <div class="topelementmbl" style="user-select: none;">
    M-EBEL
  </div>
  <div class="topelement-right" style="margin-left: 40px">
    <button class="topelementbutton">
      регистрация
    </button>
    <button class="topelementbutton">
      авторизация
    </button>
    <button class="topelementbutton" id="tempEdit" onclick="adminAccess()">
      ыстамбек
    </button>
  </div>
</div>

<input id="filterInput" type="text" class="searchBar" 
placeholder="Поиск по названию" onkeyup="barFilter()"> 
<button id="addButton" style="display: none" onclick="addRow()">Добавить строку</button>
<table class="main" align="center" id="priceList">
  <tr>
    <th id="forAdmin" style="display: none; width: 100px;">Действия</th>
    <th style="width: 20vw;" class="thmain" onclick="sortColumn(this)">Код товара</i></th>
    <th style="width: 20vw;" class="thmain" onclick="sortColumn(this)">Наименование товара</th>
    <th style="width: 20vw;" class="thmain" onclick="sortColumn(this)">Вид товара</th>
    <th style="width: 20vw;" class="thmain" onclick="sortColumn(this)">Материал</th>
    <th style="width: 20vw;" class="thmain" onclick="sortColumn(this)">Цвет</th>
    <th style="width: 20vw;" class="thmain" onclick="sortColumn(this)">Цена</th>
    <th id="dbIndex" style="display: none;"></th>
  </tr>
  <tr>
    <td id="forAdmin"style="display: none;" >
      <button class="editbutton" onclick="editRowF(this)"></button>
      <button class="deletebutton" onclick="deleteRowF(this)"></button>
    </td>
    <td>228</td>
    <td>Толкан</td>
    <td>Толкан блинб чё ещё-то</td>
    <td>Золото 88,27%</td>
    <td>спанч бобовый</td>
    <td>3 копейки</td>
    <td style="display: none;">0</td>
  </tr>
  <tr>
    <td id="forAdmin"style="display: none;" >
      <!-- <button class="editbutton"></button><button class="deletebutton"></button> -->
      <button class="editbutton" onclick="editRowF(this)"></button>
      <button class="deletebutton" onclick="deleteRowF(this)"></button>
    </td>
    <td>1337</td>
    <td>стипуха после 3 семестра</td>
    <td>влажные мечты</td>
    <td>бабло</td>
    <td>приятный</td>
    <td>3 копейки</td>
    <td style="display: none;">1</td>
  </tr>
  <tr>
    <td id="forAdmin" style="display: none;">
      <button class="editbutton" onclick="editRowF(this)"></button>
      <button class="deletebutton" onclick="deleteRowF(this)"></button>
    </td>
    <td>1488</td>
    <td>оценка отлично за лабы и курсач</td>
    <td>прикол</td>
    <td>незнаю</td>
    <td>чёрный</td>
    <td>угадай))))))))))))))))))))))</td>
    <td style="display: none;">2</td>
  </tr>
  <tr>
    <td id="forAdmin" style="display: none;">
      <button class="editbutton" onclick="editRowF(this)"></button>
      <button class="deletebutton" onclick="deleteRowF(this)"></button>
    </td>
    <td>322</td>
    <td>дошик с грибами</td>
    <td>строительный материал</td>
    <td>селёдка</td>
    <td>есть</td>
    <td>да</td>
    <td style="display: none;">3</td>
  </tr>
</table>
</div> 
<div class="footer">
  <div style="display: flex; justify-content: space-between; margin-right: 40px;">
    <div class="footerinfo">
      <p style="padding-left: 5px; user-select: none;">бибабуба 228</p>
      <p style="padding-left: 5px; user-select: none;">почта: ага чё ещё захотел</p>
    </div>
    <div class="footerinfo">
      <p style="padding-left: 5px; user-select: none;">адрес: не скажу))0)</p>
      <p style="padding-left: 5px; user-select: none;">насчёт рекламы:*ссылка на вирус*</p>
    </div>
  </div>
</div>
</body>
</html>